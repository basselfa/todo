{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TaskItem=_ref=>{let{task,onDeleteTask,onUpdateTask,onFetchTask,onUpdateTaskCompletion,onUpdateTaskPriority,onUpdateTaskDueDate}=_ref;const[isEditing,setIsEditing]=useState(false);const[editedTitle,setEditedTitle]=useState(task.title||task.task);const[editedDescription,setEditedDescription]=useState(task.description);const[editedPriority,setEditedPriority]=useState(task.priority);const[editedDueDate,setEditedDueDate]=useState(task.dueDate||task.finishingDate);const[animate,setAnimate]=useState(false);// Handle complete update using the specialized endpoint\nconst handleCompletionChange=async()=>{// If task is already completed, call incomplete endpoint, otherwise call complete endpoint\nconst newCompletionState=!task.completed;const result=await onUpdateTaskCompletion(task.id,newCompletionState);if(result){if(newCompletionState){// If task is being completed, show animation\nsetAnimate(true);setTimeout(()=>{setAnimate(false);},1000);}}};// Handle priority update using the specialized endpoint\nconst handlePriorityChange=async newPriority=>{setEditedPriority(newPriority);if(!isEditing){await onUpdateTaskPriority(task.id,newPriority);}};// Handle due date update using the specialized endpoint\n// eslint-disable-next-line no-unused-vars\nconst handleDueDateChange=async newDate=>{setEditedDueDate(newDate);if(!isEditing){await onUpdateTaskDueDate(task.id,newDate);}};// Handle full update\nconst handleUpdate=async()=>{const updatedTask={...task,title:editedTitle,description:editedDescription,priority:editedPriority,dueDate:editedDueDate};await onUpdateTask(task.id,updatedTask);setIsEditing(false);};const getPriorityColor=priority=>{switch(priority.toUpperCase()){case'HIGH':return'#f44336';case'MEDIUM':return'#ff9800';case'LOW':return'#4caf50';default:return'#757575';}};const getDateColor=()=>{if(!task.dueDate&&!task.finishingDate)return'#757575';const today=new Date();const taskDate=new Date(task.dueDate||task.finishingDate);if(taskDate<today){return'#f44336';// Red for overdue tasks\n}else if(taskDate.toDateString()===today.toDateString()){return'#ff9800';// Orange for today's tasks\n}return'#4caf50';// Green for future tasks\n};return/*#__PURE__*/_jsx(\"div\",{className:`task-item ${animate?'task-completed-animation':''}`,children:isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"task-edit-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editedTitle,onChange:e=>setEditedTitle(e.target.value),className:\"edit-input\",placeholder:\"Task title\"}),/*#__PURE__*/_jsx(\"textarea\",{value:editedDescription,onChange:e=>setEditedDescription(e.target.value),className:\"edit-input\",placeholder:\"Description\"}),/*#__PURE__*/_jsxs(\"select\",{value:editedPriority,onChange:e=>handlePriorityChange(e.target.value),className:\"edit-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"LOW\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"MEDIUM\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"HIGH\",children:\"High\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:editedDueDate,onChange:e=>setEditedDueDate(e.target.value),className:\"date-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:handleUpdate,children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setIsEditing(false),children:\"Cancel\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"task-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"task-header\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.completed,onChange:handleCompletionChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"task-title\",style:{color:task.completed?'#757575':'#212121',textDecoration:task.completed?'line-through':'none'},children:task.title||task.task}),task.description&&/*#__PURE__*/_jsx(\"p\",{className:\"task-description\",children:task.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"task-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"priority-badge\",style:{backgroundColor:getPriorityColor(task.priority)},children:task.priority}),/*#__PURE__*/_jsx(\"span\",{className:\"task-date\",style:{color:getDateColor()},children:task.dueDate||task.finishingDate||'No due date'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button edit-button\",onClick:()=>setIsEditing(true),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button delete-button\",onClick:()=>onDeleteTask(task.id),children:\"Delete\"})]})]})]})});};export default TaskItem;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","TaskItem","_ref","task","onDeleteTask","onUpdateTask","onFetchTask","onUpdateTaskCompletion","onUpdateTaskPriority","onUpdateTaskDueDate","isEditing","setIsEditing","editedTitle","setEditedTitle","title","editedDescription","setEditedDescription","description","editedPriority","setEditedPriority","priority","editedDueDate","setEditedDueDate","dueDate","finishingDate","animate","setAnimate","handleCompletionChange","newCompletionState","completed","result","id","setTimeout","handlePriorityChange","newPriority","handleDueDateChange","newDate","handleUpdate","updatedTask","getPriorityColor","toUpperCase","getDateColor","today","Date","taskDate","toDateString","className","children","type","value","onChange","e","target","placeholder","onClick","checked","style","color","textDecoration","backgroundColor"],"sources":["/home/basselfa/todo/todo-frontend/src/components/TaskItem.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst TaskItem = ({ \n  task, \n  onDeleteTask, \n  onUpdateTask,\n  onFetchTask,\n  onUpdateTaskCompletion,\n  onUpdateTaskPriority,\n  onUpdateTaskDueDate\n}) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editedTitle, setEditedTitle] = useState(task.title || task.task);\n  const [editedDescription, setEditedDescription] = useState(task.description);\n  const [editedPriority, setEditedPriority] = useState(task.priority);\n  const [editedDueDate, setEditedDueDate] = useState(task.dueDate || task.finishingDate);\n  const [animate, setAnimate] = useState(false);\n\n  // Handle complete update using the specialized endpoint\n  const handleCompletionChange = async () => {\n    // If task is already completed, call incomplete endpoint, otherwise call complete endpoint\n    const newCompletionState = !task.completed;\n    const result = await onUpdateTaskCompletion(task.id, newCompletionState);\n    if (result) {\n      if (newCompletionState) {\n        // If task is being completed, show animation\n        setAnimate(true);\n        setTimeout(() => {\n          setAnimate(false);\n        }, 1000);\n      }\n    }\n  };\n\n  // Handle priority update using the specialized endpoint\n  const handlePriorityChange = async (newPriority) => {\n    setEditedPriority(newPriority);\n    if (!isEditing) {\n      await onUpdateTaskPriority(task.id, newPriority);\n    }\n  };\n\n  // Handle due date update using the specialized endpoint\n  // eslint-disable-next-line no-unused-vars\n  const handleDueDateChange = async (newDate) => {\n    setEditedDueDate(newDate);\n    if (!isEditing) {\n      await onUpdateTaskDueDate(task.id, newDate);\n    }\n  };\n\n  // Handle full update\n  const handleUpdate = async () => {\n    const updatedTask = {\n      ...task,\n      title: editedTitle,\n      description: editedDescription,\n      priority: editedPriority,\n      dueDate: editedDueDate\n    };\n    \n    await onUpdateTask(task.id, updatedTask);\n    setIsEditing(false);\n  };\n\n  const getPriorityColor = (priority) => {\n    switch(priority.toUpperCase()) {\n      case 'HIGH': return '#f44336';\n      case 'MEDIUM': return '#ff9800';\n      case 'LOW': return '#4caf50';\n      default: return '#757575';\n    }\n  };\n\n  const getDateColor = () => {\n    if (!task.dueDate && !task.finishingDate) return '#757575';\n    \n    const today = new Date();\n    const taskDate = new Date(task.dueDate || task.finishingDate);\n    \n    if (taskDate < today) {\n      return '#f44336'; // Red for overdue tasks\n    } else if (taskDate.toDateString() === today.toDateString()) {\n      return '#ff9800'; // Orange for today's tasks\n    }\n    return '#4caf50'; // Green for future tasks\n  };\n\n  return (\n    <div className={`task-item ${animate ? 'task-completed-animation' : ''}`}>\n      {isEditing ? (\n        <div className=\"task-edit-form\">\n          <input\n            type=\"text\"\n            value={editedTitle}\n            onChange={(e) => setEditedTitle(e.target.value)}\n            className=\"edit-input\"\n            placeholder=\"Task title\"\n          />\n          <textarea\n            value={editedDescription}\n            onChange={(e) => setEditedDescription(e.target.value)}\n            className=\"edit-input\"\n            placeholder=\"Description\"\n          />\n          <select\n            value={editedPriority}\n            onChange={(e) => handlePriorityChange(e.target.value)}\n            className=\"edit-input\"\n          >\n            <option value=\"LOW\">Low</option>\n            <option value=\"MEDIUM\">Medium</option>\n            <option value=\"HIGH\">High</option>\n          </select>\n          <input\n            type=\"date\"\n            value={editedDueDate}\n            onChange={(e) => setEditedDueDate(e.target.value)}\n            className=\"date-input\"\n          />\n          <div className=\"task-actions\">\n            <button className=\"button\" onClick={handleUpdate}>Save</button>\n            <button className=\"button\" onClick={() => setIsEditing(false)}>Cancel</button>\n          </div>\n        </div>\n      ) : (\n        <div className=\"task-view\">\n          <div className=\"task-header\">\n            <input\n              type=\"checkbox\"\n              checked={task.completed}\n              onChange={handleCompletionChange}\n            />\n            <div className=\"task-content\">\n              <span className=\"task-title\" style={{ \n                color: task.completed ? '#757575' : '#212121',\n                textDecoration: task.completed ? 'line-through' : 'none'\n              }}>\n                {task.title || task.task}\n              </span>\n              {task.description && (\n                <p className=\"task-description\">{task.description}</p>\n              )}\n            </div>\n          </div>\n          <div className=\"task-footer\">\n            <div className=\"task-meta\">\n              <span className=\"priority-badge\" style={{ backgroundColor: getPriorityColor(task.priority) }}>\n                {task.priority}\n              </span>\n              <span className=\"task-date\" style={{ color: getDateColor() }}>\n                {task.dueDate || task.finishingDate || 'No due date'}\n              </span>\n            </div>\n            <div className=\"task-actions\">\n              <button className=\"button edit-button\" onClick={() => setIsEditing(true)}>\n                Edit\n              </button>\n              <button className=\"button delete-button\" onClick={() => onDeleteTask(task.id)}>\n                Delete\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TaskItem;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}